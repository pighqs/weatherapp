<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>

  <title>Weather App</title>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container sectionCity">
    <div class="row">
      <div class="col-xs-12 col-sm-offset-2 col-sm-8">
        <form class="form-inline" action="add">
          <div class="form-group">
            <label for="city">Ville</label>
            <input name="city" type="text" class="form-control" id="city" placeholder="Lyon, Paris ...">
          </div>
          <button type="submit" id="btn-valide" class="btn btn-warning">Enregistrer</button>
        </form>
      </div>
    </div>
  </div>


  <div id="content">
  </div>
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-offset-2 col-sm-8">
        <ul class="list-group" id="sortable">
          <% for(var i=0; i<cityList.length; i++) { %>
          <li class="list-group-item ui-state-default ui-icon ui-icon-arrowthick-2-n-s">
            <span class="info-meteo city"><%=cityList[i].name%></span>
            <img class="info-meteo logo-meteo" src=<%=cityList[i].icone%>>
            <span class="info-meteo desc"><%=cityList[i].description%></span>
            <span class="info-meteo label label-warning"><%=cityList[i].tempMax%></span>
            <span class="info-meteo label label-default"><%=cityList[i].tempMin%></span> <a href="/delete?position=<%=i%>">
              <span class="glyphicon glyphicon-remove-circle "></span></a></li>
              <% } %>
            </ul>

          </div>
        </div>
      </div>



      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


      <script>
        $(document).ready(function() {
          $( function() {
            $( "#sortable" ).sortable();
            $( "#sortable" ).disableSelection();
          } );
        });

        var btnSubmit = document.getElementById("btn-valide");
        var alerteExist = false;
        btnSubmit.onclick = function(e) {
          if(alerteExist) {
            var alerte = document.querySelector(".messAlert");
            console.log("messAlert existe :" + document.querySelector(".messAlert"));
            document.querySelector(".sectionCity").removeChild(alerte);
          }
          var inputVille = document.getElementById("city");
          if (inputVille.value === "") {
            var messAlert = document.createElement("p");
            messAlert.textContent = "vous n'avez pas renseign√© la ville!";
            messAlert.classList.add("messAlert", "text-center");
            document.querySelector(".sectionCity").appendChild(messAlert);
            alerteExist = true;
            event.preventDefault();
          }
        }

      </script>

    </body>
    </html>
